<ng-container *ngIf="topic">
  <h1>
    {{topic.title}}
  </h1>
  <p>
    Created by {{topic.createdBy.username}} on {{topic.createdAt | date}}
  </p>
  <nz-list
    [nzDataSource]="topic.content"
    [nzItemLayout]="'vertical'"
    [nzRenderItem]="content"
  >
    <ng-template #content let-content let-i="index">
      <button *ngIf="i===0" nz-button nzType="dashed" class="list-item new-button"
              nz-popover [nzContent]="newContentTemplate" nzTrigger="click" nzPlacement="bottom">
        <i nz-icon type="plus-circle"></i>
      </button>
      <app-content [content]="content"></app-content>
    </ng-template>
  </nz-list>
  <button *ngIf="topic.content.length === 0" nz-button nzType="dashed" class="list-item new-button"
          nz-popover [nzContent]="newContentTemplate" nzTrigger="click" nzPlacement="bottom">
    <i nz-icon type="plus-circle"></i>
  </button>
</ng-container>

<ng-template #newContentTemplate>
  <nz-list nzItemLayout="horizontal"
           [nzDataSource]="contentProviders"
           [nzRenderItem]="provider">
    <ng-template #provider let-provider let-i="index">
      <nz-list-item (click)="createNewContentModal(provider.type)">
          <nz-list-item-meta
            [nzTitle]="provider.title"
            [nzAvatar]="avatarTemplate"
            [nzDescription]="provider.description">
          </nz-list-item-meta>
          <ng-template #avatarTemplate>
            <nz-avatar [nzIcon]="provider.icon"></nz-avatar>
          </ng-template>
        </nz-list-item>
    </ng-template>
  </nz-list>
</ng-template>
