<ng-container *ngIf="topic">
  <md-card class="{{topic.published ? 'published' : 'draft'}}">
    <button md-icon-button [mdMenuTriggerFor]="menu" *ngIf="mode === topicMode.NORMAL" class="menu-button">
      <md-icon>more_vert</md-icon>
    </button>
    <md-menu #menu="mdMenu">
      <button md-menu-item (click)="edit()">
        <md-icon>edit</md-icon>
        <span>Edit</span>
      </button>
      <button md-menu-item (click)="publish()">
        <md-icon>publish</md-icon>
        <span>Publish</span>
      </button>
      <!--<button md-menu-item (click)="delete()">-->
        <!--<md-icon>delete</md-icon>-->
        <!--<span>Delete</span>-->
      <!--</button>-->
    </md-menu>
      <md-card-title>
        <span *ngIf="mode === topicMode.NORMAL">{{topic.title}}</span>
        <md-input-container class="full-width" *ngIf="mode === topicMode.EDIT">
          <input mdInput placeholder="Title" [(ngModel)]="topic.title">
        </md-input-container>
      </md-card-title>
    <md-card-content>
      <span *ngIf="mode === topicMode.NORMAL">{{topic.text}}</span>
      <md-input-container class="full-width" *ngIf="mode === topicMode.EDIT">
        <textarea mdInput placeholder="Description" [(ngModel)]="topic.text"></textarea>
      </md-input-container>
    </md-card-content>
    <md-card-actions *ngIf="mode === topicMode.EDIT">
      <a md-button (click)="save()">Opslaan</a>
      <a md-button (click)="cancel()">Annuleren</a>
    </md-card-actions>
  </md-card>

  <saevis-full-block *ngFor="let block of topic.blocks; index as i" [block]="block" (destroy)="topic.blocks.splice(i, 1)"></saevis-full-block>

  <a md-fab color="primary" [mdMenuTriggerFor]="newBlockMenu" class="add-block-button" *ngIf="!addingBlock"><md-icon>add</md-icon></a>
  <md-menu #newBlockMenu="mdMenu" [overlapTrigger]="false">
    <button md-menu-item (click)="createBlock('Poll')"> <md-icon> poll </md-icon> <span> Poll </span></button>
    <button md-menu-item (click)="createBlock('Event')"> <md-icon> event </md-icon> <span> Event </span></button>
  </md-menu>
</ng-container>
